/* =========================
   Scroll Indicator
========================= */
.btn-motion {
    position: fixed;
    top: 2.5vh;
    left: 50%;
    transform: translateX(-50%);
    z-index: 1100; /* gate보다 위 */

    transition: opacity 0.4s ease, visibility 0.4s ease;
}

.btn-motion.hide {
    opacity: 0;
    visibility: hidden;
}

/* =========================
   Music Loading Icon
========================= */
.loading-container {
    position: fixed;
    top: 3vh;
    left: 20px;
    z-index: 1100; /* gate보다 위 */
}

.loading,
.loading-container,
#music {
    pointer-events: auto;
}

.loading-container,
.loading {
    height: 25px;
    width: 25px;
    border-radius: 100%;
}

.loading {
    box-shadow:
        3px -3px 0 #FFB7C5,
        3px  3px 0 #F7CFE1,
       -3px  3px 0 #FFF8ED,
       -3px -3px 0 #FBC9E4;

    animation: rotate-loading 1.5s linear infinite;
    transform-origin: 50% 50%;
}

#music {
    position: absolute;
    opacity: 1;
    animation:
        loading-text-opacity 2s linear infinite,
        counter-rotate 1.5s linear infinite;
    filter:
        contrast(230%)
        saturate(150%)
        drop-shadow(0 0 6px rgba(0,0,0));
}

/* 초기 정지 */
.loading,
#music {
    animation-play-state: paused;
}

/* 음악 재생 시 */
.loading-container.is-running .loading,
.loading-container.is-running #music {
    animation-play-state: running;
}

/* =========================
   Audio Gate (핵심)
========================= */
#audio-gate {
    position: fixed;
    inset: 0;
    z-index: 1050; /* content 위, UI 아래 */
    background: transparent;
}

/* 음악 시작 후 완전 비활성 */
#audio-gate.disabled {
    pointer-events: none;
}

/* =========================
   Animations
========================= */
@keyframes rotate-loading {
    0%   { transform: rotate(0deg); }
    100% { transform: rotate(1800deg); }
}

@keyframes counter-rotate {
    0%   { transform: rotate(0deg); }
    100% { transform: rotate(-1800deg); }
}

@keyframes loading-text-opacity {
    0%   { opacity: 1 }
    20%  { opacity: 1 }
    50%  { opacity: 0.5 }
    100% { opacity: 1 }
}
