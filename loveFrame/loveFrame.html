<!DOCTYPE HTML>
<html>
	<head>
		<title>ìš©í›ˆ & ì†Œí¬ ì²­ì²©ì¥</title>
		<meta charset="utf-8"/>
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
		<link rel="stylesheet" href="/assets_2/css/main.css" />
		<noscript><link rel="stylesheet" href="/assets_2/css/noscript.css" /></noscript>
		<link rel="stylesheet" href="/assets_2/css/sakura.min.css">
	</head>
	<body class="is-preload" oncontextmenu="return false" ondragstart="return false" onselectstart="return false">
		<!-- Wrapper -->
			<div id="wrapper" style="height: 100dvh;">

				<!-- Header -->
					<header id="header" class="alt">
						<a href="/index.html" class="logo"><strong>ìš©í›ˆ & ì†Œí¬</strong> <span>ì²­ì²©ì¥</span></a>
						<span class="gif-container" onclick="toggleMusic()" style="cursor:pointer;">
							<audio id="myAudio" src="/images/music.mp3" autoplay loop></audio>
							<img id="gifMusic" src="/images/gifMusic.gif" alt="ì¬ìƒ" width="35" height="35" style="display:none;">
							<img id="pngMusic" src="/images/pngMusic.png" alt="ì •ì§€" width="35" height="35" style="display:none;">
						</span>
						<nav>
							<a href="#menu">Navi</a>
						</nav>
					</header>
					<div id="toast">ì´ë¯¸ì§€ë¥¼ ëˆ„ë¥´ë©´ ì¬ìƒë©ë‹ˆë‹¤</div>

				<!-- Menu -->
					<nav id="menu">
						<ul class="actions stacked">
							<li><a href="/index.html" class="button primary fit">[ ì²« í™” ë©´ ìœ¼ ë¡œ ]</a></li>
							<li><a href="#" onclick="navi(0);" class="button fit">â™¥ ì•ˆ ë‚´ ì‚¬ í•­ â™¥</a></li>
						</ul>
						<ul class="links">
							<li><a href="#" onclick="navi(1);">1. ìŠ¤íŠœë””ì˜¤ì—ì„œ</a></li>
							<li><a href="#" onclick="navi(2);">2. ê³ ê¶ì—ì„œ</a></li>
							<li><a href="#" onclick="navi(3);">3. ë°”ë‹¤ì—ì„œ</a></li>
							<li><a href="#" onclick="navi(4);">4. ê³µì›ì—ì„œ</a></li>
							<li><a href="#" onclick="navi(5);">5. ë˜ ë‹¤ë¥¸ ì–´ë”˜ê°€</a></li>
						</ul>
					</nav>

				<!-- Banner -->
				<div style="height: 100%; width:100%;">
					<iframe id="loveFrame" style="height: 100%; width:100%; border: none;" src="/loveFrame/Hoon-Hui_Memories.html" scrolling="auto"></iframe>
				</div>
			</div>
		<!-- Scripts -->
			<script src="/assets_2/js/jquery.min.js"></script>
			<script src="/assets_2/js/jquery.scrolly.min.js"></script>
			<script src="/assets_2/js/jquery.scrollex.min.js"></script>
			<script src="/assets_2/js/browser.min.js"></script>
			<script src="/assets_2/js/breakpoints.min.js"></script>
			<script src="/assets_2/js/util.js"></script>
			<script src="/assets_2/js/main.js"></script>

			<script src="/assets_2/js/sakura.min.js"></script>
			<script>
			  //ì ìš©í•  ë¶€ë¶„ì„ ë„£ê³  ì‹¤í–‰
			  var sakura = new Sakura('body');
			</script>

			<script src="/assets/js/bgm.js"></script>
			<script>
				function navi(naviChk){
				    const loveFrame = document.getElementById('loveFrame');

					// 3. ë³€ìˆ˜ê°’ì— ë”°ë¼ ì£¼ì†Œ ì„¤ì •
					if (naviChk == '0') {
						loveFrame.src = "/loveFrame/navi.html?navi=0";
					} else if (naviChk == '1') {
						loveFrame.src = "/loveFrame/navi.html?navi=1";
					} else if (naviChk == '2') {
						loveFrame.src = "/loveFrame/navi.html?navi=2";
					} else if (naviChk == '3') {
						loveFrame.src = "/loveFrame/navi.html?navi=3";
					} else if (naviChk == '4') {
						loveFrame.src = "/loveFrame/navi.html?navi=4";
					} else if (naviChk == '5') {
						loveFrame.src = "/loveFrame/navi.html?navi=5";
					} else {
						alert("ì˜ëª»ëœ ê°’ì…ë‹ˆë‹¤. ë©”ì¸ í˜ì´ì§€ë¡œ ì´ë™í•©ë‹ˆë‹¤.");
						loveFrame.src = "/index.html";
					}
				}			    
			</script>

			<script>
				//document.addEventListener('DOMContentLoaded', function() {
				/*
				window.onload = function(){		    
					showToast();
					const hash = location.hash;
				    if (!hash) return;
				
				    // #runFunctionB=hello
				    const [action, param] = hash.substring(1).split('=');
				
				    if (action === 'navi') {
				        navi(param);
				    }			
				}
				*/
				//});
	
				function showToast() {
					const toast=document.getElementById("toast");
					const isAndroid = /Android/i.test(navigator.userAgent);

					const gifMusic=document.getElementById("gifMusic");
					const pngMusic=document.getElementById("pngMusic");
					
					if (!isAndroid) {
						pngMusic.style.display = "block";
						
			            // í´ë˜ìŠ¤ ì¶”ê°€í•˜ì—¬ ë‚˜íƒ€ë‚˜ê²Œ í•¨
						setTimeout(() => {
			                toast.classList.add("show");
			            }, 2000);
			
			            // 2ì´ˆ ë’¤ì— ë‹¤ì‹œ ì‚¬ë¼ì§€ê²Œ í•¨ (2000ms)
			            setTimeout(() => {
			                toast.classList.remove("show");
			            }, 4000);
					} else {
						gifMusic.style.display = "block";
					}
		        }
			</script>

		    <script>
    // ğŸ”¹ ë’¤ë¡œê°€ê¸° ì²˜ë¦¬
    window.addEventListener('popstate', function(e) {
        if (e.state?.page === 'Hoon-Hui_Memories') {
            const iframe = document.getElementById('loveFrame');
            if (iframe && iframe.contentWindow) {
                // iframe ë‚´ë¶€ history ì´ˆê¸°í™”
                iframe.contentWindow.location.replace('Hoon-Hui_Memories.html');
            }
        }
    });

    window.onload = function() {
        showToast();
		const params = new URLSearchParams(location.search);
        const naviValue = params.get('navi'); // ?navi=2 ë“±

        // ğŸ”¹ URL ê¹”ë”í•˜ê²Œ
        history.replaceState(null, '', location.pathname);

        // ğŸ”¹ bb ìƒíƒœë¥¼ historyì— push (ë’¤ë¡œê°€ê¸° ê¸°ì¤€)
        history.pushState({ page: 'Hoon-Hui_Memories' }, '', location.pathname);

        const iframe = document.getElementById('loveFrame');

        // iframeì´ bb.html ë¡œë“œ ì™„ë£Œ í›„
        iframe.onload = function() {
            // ğŸ”¹ ë¶„ê¸° ì¡°ê±´
            if (naviValue === '2') {
                // ë¶„ê¸°: cc.html ë¡œ ì´ë™ (replace â†’ historyì— ì•ˆ ìŒ“ì„)
                iframe.contentWindow.location.replace('Hoon-Hui_in_Palace.html');
            }
            // ë‹¤ë¥¸ naviValue ë¶„ê¸°ë„ ì—¬ê¸°ì— ì¶”ê°€ ê°€ëŠ¥
        };
    };
			</script>
	</body>

</html>
