<!DOCTYPE HTML>
<html>
	<head>
		<title>Hoon & Hui invitation</title>
		<meta charset="utf-8"/>
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
		<link rel="stylesheet" href="/assets_2/css/main.css" />
		<noscript><link rel="stylesheet" href="/assets_2/css/noscript.css" /></noscript>
		<link rel="stylesheet" href="/assets_2/css/sakura.min.css">
	</head>
	<body class="is-preload" oncontextmenu="return false" ondragstart="return false" onselectstart="return false">
		<!-- Wrapper -->
			<div id="wrapper" style="height: 100dvh;">

				<!-- Header -->				
					<header id="header" class="alt">
						<a href="/index_eng.html" class="logo"><strong>Hoon & Hui</strong> <span>invitation</span></a>
						<span class="gif-container" onclick="toggleMusic()" style="cursor:pointer;">
							<audio id="myAudio" src="/images/music.mp3" autoplay loop></audio>
							<img id="gifMusic" src="/images/gifMusic.gif" alt="start" width="35" height="35" style="display:none;">
							<img id="pngMusic" src="/images/pngMusic.png" alt="stop" width="35" height="35" style="display:none;">
						</span>
						<nav>
							<a href="#menu">Navi</a>
						</nav>
					</header>
					<div id="toast">Tap the image to play</div>

				<!-- Menu -->
					<nav id="menu">
						<ul class="actions stacked">
							<li><a href="/index.html" class="button primary fit">[ H O M E ]</a></li>
							<li><a href="#" onclick="navi(0);" class="button fit">♥ I N F O ♥</a></li>
						</ul>
						<ul class="links">
							<li><a href="#" onclick="navi(1);">1. in the Studio</a></li>
							<li><a href="#" onclick="navi(2);">2. in the Palace</a></li>
							<li><a href="#" onclick="navi(3);">3. by the Sea</a></li>
							<li><a href="#" onclick="navi(4);">4. in the Park</a></li>
							<li><a href="#" onclick="navi(5);">5. in the OtherPlace</a></li>
						</ul>
					</nav>

				<!-- Banner -->
				<div style="height: 100%; width:100%;">
					<iframe id="loveFrame" style="height: 100%; width:100%; border: none;" src="/loveFrame/Hoon-Hui_Memories_eng.html" scrolling="auto"></iframe>
				</div>
			</div>
		<!-- Scripts -->
			<script src="/assets_2/js/jquery.min.js"></script>
			<script src="/assets_2/js/jquery.scrolly.min.js"></script>
			<script src="/assets_2/js/jquery.scrollex.min.js"></script>
			<script src="/assets_2/js/browser.min.js"></script>
			<script src="/assets_2/js/breakpoints.min.js"></script>
			<script src="/assets_2/js/util.js"></script>
			<script src="/assets_2/js/main.js"></script>

			<script src="/assets_2/js/sakura.min.js"></script>
			<script>
			  var sakura = new Sakura('body');
			</script>

			<script src="/assets/js/bgm.js"></script>
			<script>
				function navi(naviChk){
				    const loveFrame = document.getElementById('loveFrame');

					if (naviChk == '0') {
						loveFrame.src = "/loveFrame/navi_eng.html?navi=0";
					} else if (naviChk == '1') {
						loveFrame.src = "/loveFrame/navi_eng.html?navi=1";
					} else if (naviChk == '2') {
						loveFrame.src = "/loveFrame/navi_eng.html?navi=2";
					} else if (naviChk == '3') {
						loveFrame.src = "/loveFrame/navi_eng.html?navi=3";
					} else if (naviChk == '4') {
						loveFrame.src = "/loveFrame/navi_eng.html?navi=4";
					} else if (naviChk == '5') {
						loveFrame.src = "/loveFrame/navi_eng.html?navi=5";
					} else {
						alert("Invalid value. Returning to the main page");
						loveFrame.src = "/index_eng.html";
					}
				    
				}			    
			</script>

			<script>
				window.onload = function(){
					showToast();
					const hash = location.hash;
				    if (!hash) return;
				
				    // #runFunctionB=hello
				    const [action, param] = hash.substring(1).split('=');
				
				    if (action === 'navi') {
				        navi(param);
				    }					
				}
				
				function showToast() {
					const toast=document.getElementById("toast");
					const isAndroid = /Android/i.test(navigator.userAgent);

					const gifMusic=document.getElementById("gifMusic");
					const pngMusic=document.getElementById("pngMusic");
					
					if (!isAndroid) {
						pngMusic.style.display = "block";
						
			            // 클래스 추가하여 나타나게 함
						setTimeout(() => {
			                toast.classList.add("show");
			            }, 2000);
			
			            // 2초 뒤에 다시 사라지게 함 (2000ms)
			            setTimeout(() => {
			                toast.classList.remove("show");
			            }, 4000);
					} else {
						gifMusic.style.display = "block";
					}
		        }
			</script>

			<script>
				function handleNaviFromHash() {
				  var hash = location.hash;
				  if (!hash) return;
				
				  var match = hash.match(/navi=(\d+)/);
				  if (!match) return;
				
				  var naviIndex = parseInt(match[1], 10);
				
				  // 기존 navi 함수 호출
				  if (typeof navi === 'function') {
				    navi(naviIndex);
				  }
				}
				
				// 최초 페이지 진입
				window.addEventListener('DOMContentLoaded', handleNaviFromHash);
				
				// 뒤로가기 / 앞으로가기 시 hash 변경 감지
				window.addEventListener('hashchange', handleNaviFromHash);
			</script>

			<script>
			  // 영문 top을 히스토리 기준점으로 설정
			  history.replaceState({ page: 'eng_top' }, '', 'loveFrame_eng.html');
			
			  window.addEventListener('popstate', function () {
			    // 뒤로가기 시 자기 자신 유지
			    history.pushState(null, '', 'loveFrame_eng.html');
			  });
			</script>

	</body>

</html>
